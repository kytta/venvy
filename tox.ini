[tox]
envlist =
    py311
    py310
    py39
    py38
    py37
    pypy3
    coverage
isolated_build = true
skip_missing_interpreters = true
requires = tox>=4

[testenv]
description = run tests with {basepython}
commands =
    coverage erase
    coverage run -m pytest tests
    coverage combine
    coverage report --skip-covered --show-missing
    coverage xml -o {toxworkdir}/coverage.{envname}.xml
    coverage html -d {envtmpdir}/htmlcov --show-contexts  --title venvy-{envname}-coverage
